{"ast":null,"code":"import _regeneratorRuntime from\"/home/max/Desktop/DealershipApp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/max/Desktop/DealershipApp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/max/Desktop/DealershipApp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/max/Desktop/DealershipApp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/max/Desktop/DealershipApp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/max/Desktop/DealershipApp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/max/Desktop/DealershipApp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{useHistory}from\"react-router\";import\"./Buy.css\";import{useState,useEffect}from\"react\";import Axios from\"axios\";import{useLayoutEffect}from\"react\";import TextField from\"@material-ui/core/TextField\";import InputLabel from'@mui/material/InputLabel';import MenuItem from'@mui/material/MenuItem';import FormControl from'@mui/material/FormControl';import ListSubheader from'@mui/material/ListSubheader';import Select from'@mui/material/Select';import OutlinedInput from'@mui/material/OutlinedInput';import Register from\"./Register\";import React,{Component}from'react';import{withRouter}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var options=[];var Buy=/*#__PURE__*/function(_React$Component){_inherits(Buy,_React$Component);var _super=_createSuper(Buy);function Buy(props){var _this;_classCallCheck(this,Buy);_this=_super.call(this,props);_this.state={cars:[],colors:[],selectedCar:'BMW',selectedColor:'black',selectedMinDate:0,selectedMaxDate:3000,selectedMinPrice:0,selectedMaxPrice:20000,response:[]};_this.handleColorChange=_this.handleColorChange.bind(_assertThisInitialized(_this));_this.handleCarChange=_this.handleCarChange.bind(_assertThisInitialized(_this));_this.handleMaxDateChange=_this.handleMaxDateChange.bind(_assertThisInitialized(_this));_this.handleMinDateChange=_this.handleMinDateChange.bind(_assertThisInitialized(_this));_this.handleMaxPriceChange=_this.handleMaxPriceChange.bind(_assertThisInitialized(_this));_this.handleMinPriceChange=_this.handleMinPriceChange.bind(_assertThisInitialized(_this));_this.submit=_this.submit.bind(_assertThisInitialized(_this));_this.buyCarHandler=_this.buyCarHandler.bind(_assertThisInitialized(_this));return _this;}_createClass(Buy,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch('http://localhost:3001/auto').then(function(response){return response.json();}).then(function(data){_this2.setState({cars:data.cars,colors:data.colors});});}},{key:\"handleCarChange\",value:function handleCarChange(e){this.setState({selectedCar:e.target.value});}},{key:\"handleColorChange\",value:function handleColorChange(e){this.setState({selectedColor:e.target.value});}},{key:\"handleMinDateChange\",value:function handleMinDateChange(e){this.setState({selectedMinDate:e.target.value});}},{key:\"handleMaxDateChange\",value:function handleMaxDateChange(e){this.setState({selectedMaxDate:e.target.value});}},{key:\"handleMinPriceChange\",value:function handleMinPriceChange(e){this.setState({selectedMinPrice:e.target.value});}},{key:\"handleMaxPriceChange\",value:function handleMaxPriceChange(e){this.setState({selectedMaxPrice:e.target.value});}},{key:\"submit\",value:function(){var _submit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var url,data,response,json;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url='http://localhost:3001/auto/buy';data=this.state;_context.prev=2;_context.next=5;return fetch(url,{method:'POST',// или 'PUT'\nbody:JSON.stringify(data),// данные могут быть 'строкой' или {объектом}!\nheaders:{'Content-Type':'application/json'}});case 5:response=_context.sent;_context.next=8;return response.json();case 8:json=_context.sent;this.setState({response:json});this.forceUpdate();_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);console.error('Ошибка:',_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,this,[[2,13]]);}));function submit(_x){return _submit.apply(this,arguments);}return submit;}()},{key:\"buyCarHandler\",value:function buyCarHandler(e){this.props.history.push(\"/auto/buy\");}},{key:\"render\",value:function render(){var _this3=this;console.log(this.state.response);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",style:{scrollBehavior:\"auto\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"Buy\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"contents\",style:{height:\"80px\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"BUY CAR\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"auto\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"auto\",id:\"auto-label\",children:/*#__PURE__*/_jsx(\"b\",{children:\"BRAND:\\u2003\"})}),/*#__PURE__*/_jsx(\"select\",{name:\"auto\",value:this.state.selectedCar,onChange:this.handleCarChange,children:this.state.cars.map(function(car){return/*#__PURE__*/_jsx(\"option\",{value:car.name,children:car.name},car.name);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"color\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"color\",id:\"color-label\",children:/*#__PURE__*/_jsx(\"b\",{children:\"COLOR:\\u2003\"})}),/*#__PURE__*/_jsx(\"select\",{name:\"color\",value:this.state.selectedColor,onChange:this.handleColorChange,children:this.state.colors.map(function(color){return/*#__PURE__*/_jsx(\"option\",{value:color.color,children:color.color},color.color);})})]}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'white',backgroundColor:'blue',margin:'0px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"RELEASE DATE:\"}),\"  \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"date\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"date_from\",id:\"date-label1\",children:/*#__PURE__*/_jsx(\"b\",{children:\"FROM:\\u2003\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"date_from\",onChange:this.handleMinDateChange}),/*#__PURE__*/_jsx(\"label\",{for:\"date_to\",id:\"date-label2\",children:/*#__PURE__*/_jsx(\"b\",{children:\"TO:\\u2003\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"date_to\",onChange:this.handleMaxDateChange})]}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'white',backgroundColor:'blue',margin:'0px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"PREFERRED PRICE (IN AMERICAN DOLLARS):\"}),\"   \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"price_from\",id:\"price-label1\",children:/*#__PURE__*/_jsx(\"b\",{children:\"FROM:\\u2003\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"price_from\",onChange:this.handleMinPriceChange}),/*#__PURE__*/_jsx(\"label\",{for:\"price_to\",id:\"price-label2\",children:/*#__PURE__*/_jsx(\"b\",{children:\"TO:\\u2003\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"price_to\",onChange:this.handleMaxPriceChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"submit\",children:/*#__PURE__*/_jsx(\"button\",{style:{height:\"50px\",marginTop:\"20px\"},onClick:function onClick(){_this3.submit();},children:\"Submit\"})}),this.state.response.map(function(car){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"auto-info\",children:[/*#__PURE__*/_jsx(\"img\",{style:{float:\"left\",height:\"492px\",width:\"640px\"},src:car.image}),/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"AUTO INFO:\"}),\" \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Brand: \",/*#__PURE__*/_jsx(\"span\",{className:\"main-info\",children:car.name})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Model: \",/*#__PURE__*/_jsx(\"span\",{className:\"main-info\",children:car.model})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Color: \",/*#__PURE__*/_jsx(\"span\",{className:\"main-info\",children:car.color})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0412ody material: \",/*#__PURE__*/_jsx(\"span\",{className:\"main-info\",children:car.material})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"VIN (Identification number):  \",/*#__PURE__*/_jsx(\"span\",{className:\"main-info\",children:car.vin})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Vehicle Power: \",/*#__PURE__*/_jsxs(\"span\",{className:\"main-info\",children:[car.power,\" Hourespower\"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"dealership-info\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"DEALERSHIP INFO:\"}),\" \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Dealership: \",/*#__PURE__*/_jsx(\"span\",{className:\"main-info\",children:car.dealership})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Dealership adress: \",/*#__PURE__*/_jsx(\"span\",{className:\"main-info\",children:car.adress})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Dealership contact number: \",/*#__PURE__*/_jsx(\"span\",{className:\"main-info\",children:car.number})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:_this3.buyCarHandler,style:{marginLeft:\"400px\",marginTop:\"20px\",height:\"50px\",width:\"400px\"},value:car.vin,children:\"Buy car\"}),/*#__PURE__*/_jsx(\"hr\",{})]})});})]})});}}]);return Buy;}(React.Component);var BuyCar=withRouter(Buy);export default BuyCar;","map":{"version":3,"sources":["/home/max/Desktop/DealershipApp/client/src/Pages/Buy.js"],"names":["useHistory","useState","useEffect","Axios","useLayoutEffect","TextField","InputLabel","MenuItem","FormControl","ListSubheader","Select","OutlinedInput","Register","React","Component","withRouter","options","Buy","props","state","cars","colors","selectedCar","selectedColor","selectedMinDate","selectedMaxDate","selectedMinPrice","selectedMaxPrice","response","handleColorChange","bind","handleCarChange","handleMaxDateChange","handleMinDateChange","handleMaxPriceChange","handleMinPriceChange","submit","buyCarHandler","fetch","then","json","data","setState","e","target","value","url","method","body","JSON","stringify","headers","forceUpdate","console","error","history","push","log","scrollBehavior","height","map","car","name","color","backgroundColor","margin","marginTop","float","width","image","model","material","vin","power","dealership","adress","number","marginLeft","BuyCar"],"mappings":"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","sourcesContent":["import { useHistory } from \"react-router\";\nimport \"./Buy.css\"\nimport { useState, useEffect } from \"react\"\nimport Axios from \"axios\"\nimport {useLayoutEffect} from  \"react\"\nimport TextField from \"@material-ui/core/TextField\";\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport ListSubheader from '@mui/material/ListSubheader';\nimport Select from '@mui/material/Select';\nimport OutlinedInput from '@mui/material/OutlinedInput';\nimport Register from \"./Register\";\nimport React, { Component } from 'react';\nimport { withRouter } from \"react-router-dom\";\n\n\n\nlet options = []\n\n\nclass Buy extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            cars: [],\n            colors: [],\n            selectedCar: 'BMW',\n            selectedColor: 'black',\n            selectedMinDate: 0,\n            selectedMaxDate: 3000,\n            selectedMinPrice: 0,\n            selectedMaxPrice: 20000, \n            response: []\n        }\n\n        this.handleColorChange = this.handleColorChange.bind(this)\n        this.handleCarChange = this.handleCarChange.bind(this)\n        this.handleMaxDateChange = this.handleMaxDateChange.bind(this)\n        this.handleMinDateChange = this.handleMinDateChange.bind(this)\n        this.handleMaxPriceChange = this.handleMaxPriceChange.bind(this)\n        this.handleMinPriceChange = this.handleMinPriceChange.bind(this)\n        this.submit = this.submit.bind(this)\n        this.buyCarHandler = this.buyCarHandler.bind(this)\n    }\n\n    componentDidMount() {\n        fetch('http://localhost:3001/auto')\n        .then((response) => response.json())\n        .then(data => {\n            this.setState({cars: data.cars, colors: data.colors})\n        })\n\n    }\n\n\n\n\n    handleCarChange(e) {\n       \n        this.setState({ selectedCar: e.target.value });\n    }\n\n    handleColorChange(e) {\n       \n        this.setState({ selectedColor: e.target.value });\n    }\n\n\n    handleMinDateChange(e) {\n        this.setState({ selectedMinDate: e.target.value });\n    }\n\n    handleMaxDateChange(e) {\n        this.setState({ selectedMaxDate: e.target.value });\n    }\n\n    handleMinPriceChange(e) {\n        this.setState({ selectedMinPrice: e.target.value });\n    }\n\n    handleMaxPriceChange(e) {\n        this.setState({ selectedMaxPrice: e.target.value });\n    }\n\n    async submit (e) {\n        const url = 'http://localhost:3001/auto/buy';\n        const data = this.state\n\n\n        try {\n          const response = await fetch(url, {\n            method: 'POST', // или 'PUT'\n            body: JSON.stringify(data), // данные могут быть 'строкой' или {объектом}!\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          });\n          const json = await response.json();\n          this.setState({response: json})\n          this.forceUpdate()\n     \n        } catch (error) {\n          console.error('Ошибка:', error);\n        }\n    }\n\n    buyCarHandler (e) {\n        this.props.history.push(\"/auto/buy\")\n    }\n    \n\n\n    render() {\n\n        console.log(this.state.response)\n\n        return (\n\n            <div className=\"App\" style={{scrollBehavior: \"auto\"}}>\n                <div className=\"Buy\">\n                    <div className=\"contents\" style={{height:\"80px\"}}>\n                        <h1><strong>BUY CAR</strong></h1>\n                        <br></br>\n                        <br></br>\n                    </div>\n                    <div className=\"auto\">\n                        <label for=\"auto\" id='auto-label'><b>BRAND:&emsp;</b></label>\n                        <select name=\"auto\" value={this.state.selectedCar} onChange={this.handleCarChange}>\n                            {this.state.cars.map((car) => { return <option value={car.name} key={car.name}>{car.name}</option>})}\n                        </select>\n                    </div>\n                    <div className=\"color\">\n                        <label for=\"color\" id='color-label'><b>COLOR:&emsp;</b></label>\n                        <select name=\"color\" value={this.state.selectedColor} onChange={this.handleColorChange}>\n                            {this.state.colors.map((color) => { return <option value={color.color} key={color.color}>{color.color}</option>})}\n                        </select>\n                    </div>\n                    <p style={{color: 'white', backgroundColor: 'blue', margin: '0px'}}><strong>RELEASE DATE:</strong>  </p>\n                    <div className=\"date\">\n                        <label for=\"date_from\" id='date-label1'><b>FROM:&emsp;</b></label>\n                        <input type=\"text\" name=\"date_from\"  onChange={this.handleMinDateChange}></input>\n                        <label for=\"date_to\" id='date-label2'><b>TO:&emsp;</b></label>\n                        <input type=\"text\" name=\"date_to\"  onChange={this.handleMaxDateChange}></input>\n                    </div>\n                    <p style={{color: 'white', backgroundColor: 'blue', margin: '0px'}}><strong>PREFERRED PRICE (IN AMERICAN DOLLARS):</strong>   </p>\n                    <div className=\"price\">\n                        <label for=\"price_from\" id='price-label1'><b>FROM:&emsp;</b></label>\n                        <input type=\"text\" name=\"price_from\" onChange={this.handleMinPriceChange}></input>\n                        <label for=\"price_to\" id='price-label2'><b>TO:&emsp;</b></label>\n                        <input type=\"text\" name=\"price_to\"  onChange={this.handleMaxPriceChange}></input>\n                    </div>\n                    <div className=\"submit\"> \n                       <button style={{height: \"50px\", marginTop:\"20px\"}} onClick={() => {this.submit()}}>Submit</button>\n                    </div>\n                    {   \n                    this.state.response.map((car) => {\n\n                       return (\n                           <div>\n                                <div className=\"auto-info\">\n                                    <img style={{float:\"left\", height: \"492px\", width:\"640px\"}}src={car.image}></img>\n                                    <h1><strong>AUTO INFO:</strong> </h1>\n                                    <p>Brand: <span className=\"main-info\">{car.name}</span></p>\n                                    <p>Model: <span className=\"main-info\">{car.model}</span></p> \n                                    <p>Color: <span className=\"main-info\">{car.color}</span></p> \n                                    <p>Вody material: <span className=\"main-info\">{car.material}</span></p> \n                                    <p>VIN (Identification number):  <span className=\"main-info\">{car.vin}</span></p>\n                                    <p>Vehicle Power: <span className=\"main-info\">{car.power} Hourespower</span></p>\n                                    <br></br>\n                                    <div className=\"dealership-info\">\n                                        <h1><strong>DEALERSHIP INFO:</strong> </h1>\n                                        <p>Dealership: <span className=\"main-info\">{car.dealership}</span></p>\n                                        <p>Dealership adress: <span className=\"main-info\">{car.adress}</span></p> \n                                        <p>Dealership contact number: <span className=\"main-info\">{car.number}</span></p> \n                                    </div>\n                                    <button onClick={this.buyCarHandler} style={{marginLeft:\"400px\", marginTop:\"20px\", height:\"50px\", width:\"400px\"}} value={car.vin}>Buy car</button>\n                                    <hr></hr>\n                                </div>            \n                           </div>\n                       )\n                    })\n                    }\n                </div>\n            </div>\n        )\n    }\n\n}\n\n\nconst BuyCar = withRouter(Buy);\n\nexport default BuyCar"]},"metadata":{},"sourceType":"module"}