{"ast":null,"code":"var _jsxFileName = \"/home/max/Desktop/DealershipApp/client/src/Pages/PaymentForm.js\";\nimport { useState, useRef, useEffect } from \"react\";\nimport Cards from \"react-credit-cards\";\nimport \"react-credit-cards/es/styles-compiled.css\";\nimport \"./PaymentFormStyles.css\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport React from \"react\";\nimport { withRouter } from \"react-router\";\nimport Spinner from 'react-bootstrap/Spinner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass PaymentForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cvc: '',\n      expiry: '',\n      focus: '',\n      name: '',\n      number: '',\n      succeed: false,\n      info: false\n    };\n\n    this.handleInputFocus = e => {\n      this.setState({\n        focus: e.target.name\n      });\n    };\n\n    this.handleInputChange = e => {\n      const {\n        name,\n        value\n      } = e.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.submit = async () => {\n      this.setState({\n        succeed: true\n      });\n      console.log('PAYMENT');\n      const url = 'http://localhost:3001/payment';\n      let data = this.props.location;\n\n      try {\n        const response = await fetch(url, {\n          method: 'POST',\n          // или 'PUT'\n          body: JSON.stringify(data),\n          // данные могут быть 'строкой' или {объектом}!\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n      } catch (error) {\n        console.error('Ошибка:', error);\n      }\n    };\n\n    this.submit = this.submit.bind(this);\n  }\n\n  render() {\n    if (!this.state.succeed && !this.state.info) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"PaymentForm\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Description\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Please, enter your credit card details to make a payment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 76\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Card\",\n          children: [/*#__PURE__*/_jsxDEV(Cards, {\n            number: this.state.number,\n            name: this.state.name,\n            expiry: this.state.expiry,\n            cvc: this.state.cvc,\n            focused: this.state.focus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"tel\",\n              name: \"number\",\n              placeholder: \"Card Number\",\n              maxLength: 16,\n              value: this.state.number,\n              onChange: this.handleInputChange,\n              onFocus: this.handleInputFocus\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"name\",\n              placeholder: \"Name\",\n              value: this.state.name,\n              maxLength: 20,\n              onChange: this.handleInputChange,\n              onFocus: this.handleInputFocus\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"expiry\",\n              placeholder: \"MM/YY\",\n              value: this.state.expiry,\n              maxLength: 4,\n              onChange: this.handleInputChange,\n              onFocus: this.handleInputFocus\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"tel\",\n              name: \"cvc\",\n              placeholder: \"CVC\",\n              value: this.state.cvc,\n              maxLength: 3,\n              onChange: this.handleInputChange,\n              onFocus: this.handleInputFocus\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"button-84\",\n              role: \"button\",\n              onClick: () => {\n                this.submit(this.props.location);\n              },\n              children: \"PAY\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 7\n      }, this);\n    } else if (this.state.succeed && this.state.info) {\n      setTimeout(() => this.setState({\n        succeed: false\n      }), 2000);\n      return /*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\",\n        role: \"status\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"visually-hidden\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this);\n    }\n  }\n\n}\n\nexport default _c = withRouter(PaymentForm);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/home/max/Desktop/DealershipApp/client/src/Pages/PaymentForm.js"],"names":["useState","useRef","useEffect","Cards","useLocation","useHistory","React","withRouter","Spinner","PaymentForm","Component","constructor","props","state","cvc","expiry","focus","name","number","succeed","info","handleInputFocus","e","setState","target","handleInputChange","value","submit","console","log","url","data","location","response","fetch","method","body","JSON","stringify","headers","error","bind","render","setTimeout"],"mappings":"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","sourcesContent":["import { useState, useRef, useEffect } from \"react\";\nimport Cards from \"react-credit-cards\";\nimport \"react-credit-cards/es/styles-compiled.css\";\nimport \"./PaymentFormStyles.css\"\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport React from \"react\";\nimport { withRouter } from \"react-router\";\nimport Spinner from 'react-bootstrap/Spinner'\n\n\nclass PaymentForm extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.submit = this.submit.bind(this)\n  }\n \n  state = {\n    cvc: '',\n    expiry: '',\n    focus: '',\n    name: '',\n    number: '',\n    succeed: false,\n    info: false \n  };\n\n  handleInputFocus = (e) => {\n    this.setState({ focus: e.target.name });\n  }\n  \n  handleInputChange = (e) => {\n    const { name, value } = e.target;\n    \n    this.setState({ [name]: value });\n  }\n\n\n  submit = async () => {\n    this.setState({succeed: true})\n    console.log('PAYMENT')\n        const url = 'http://localhost:3001/payment';\n        let data = this.props.location\n        try {\n          const response = await fetch(url, {\n            method: 'POST', // или 'PUT'\n            body: JSON.stringify(data), // данные могут быть 'строкой' или {объектом}!\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          });\n          \n     \n        } catch (error) {\n          console.error('Ошибка:', error);\n        }\n  }\n  \n\n\n  render () {\n  if  (!this.state.succeed && !this.state.info) {\n    return (\n      <div className=\"PaymentForm\">\n        <div className=\"Description\">\n          <h1>Please, enter your credit card details to make a payment</h1><br></br>\n        </div>\n        <div className=\"Card\">\n          <Cards\n            number={this.state.number}\n            name={this.state.name}\n            expiry={this.state.expiry}\n            cvc={this.state.cvc}\n            focused={this.state.focus}\n          />\n          <form>\n            <input\n              type=\"tel\"\n              name=\"number\"\n              placeholder=\"Card Number\"\n              maxLength={16}\n              value={this.state.number}\n              onChange={this.handleInputChange}\n              onFocus={this.handleInputFocus}\n            />\n            <input\n              type=\"text\"\n              name=\"name\"\n              placeholder=\"Name\"\n              value={this.state.name}\n              maxLength={20}\n              onChange={this.handleInputChange}\n              onFocus={this.handleInputFocus}\n            />\n            <input\n              type=\"text\"\n              name=\"expiry\"\n              placeholder=\"MM/YY\"\n              value={this.state.expiry}\n              maxLength={4}\n              onChange={this.handleInputChange}\n              onFocus={this.handleInputFocus}\n            />\n            <input\n              type=\"tel\"\n              name=\"cvc\"\n              placeholder=\"CVC\"\n              value={this.state.cvc}\n              maxLength={3}\n              onChange={this.handleInputChange}\n              onFocus={this.handleInputFocus}\n            />\n            <button class=\"button-84\" role=\"button\" onClick={() => {this.submit(this.props.location)}}>PAY</button>\n          </form>\n        </div>\n      </div>\n    );\n\n  } else if (this.state.succeed && this.state.info)\n  {\n    setTimeout(() => this.setState({succeed:false, }), 2000)\n    return(\n        <Spinner animation=\"border\" role=\"status\">\n          <span className=\"visually-hidden\">Loading...</span>\n        </Spinner>\n    )\n  }\n\n\n\n\n  }\n\n\n\n}\n\n\nexport default withRouter(PaymentForm)"]},"metadata":{},"sourceType":"module"}